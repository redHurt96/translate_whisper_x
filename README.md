# Ð¢Ñ€Ð°Ð½ÑÐºÑ€Ð¸Ð±Ð°Ñ†Ð¸Ñ Ð²Ð¸Ð´ÐµÐ¾ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ WhisperX

ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ñ‚Ñ€Ð°Ð½ÑÐºÑ€Ð¸Ð±Ð°Ñ†Ð¸Ñ Ð²Ð¸Ð´ÐµÐ¾ Ð¸ Ð°ÑƒÐ´Ð¸Ð¾ Ñ„Ð°Ð¹Ð»Ð¾Ð² Ñ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸ÐµÐ¼ ÑÐ¿Ð¸ÐºÐµÑ€Ð¾Ð² (Ð´Ð¸Ð°Ñ€Ð¸Ð·Ð°Ñ†Ð¸ÐµÐ¹) Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ WhisperX.

## Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸

- ðŸŽ¬ ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° MP4, MKV, MP3 Ð¸ WAV Ñ„Ð°Ð¹Ð»Ð¾Ð²
- ðŸ—£ï¸ ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ ÑÐ¿Ð¸ÐºÐµÑ€Ð¾Ð² (Ð´Ð¸Ð°Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ñ)
- â±ï¸ Ð¢Ð¾Ñ‡Ð½Ñ‹Ðµ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¼ÐµÑ‚ÐºÐ¸
- ðŸ’¾ ÐšÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð² (Ð½Ðµ Ð½ÑƒÐ¶Ð½Ð¾ Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð» Ð·Ð°Ð½Ð¾Ð²Ð¾)
- ðŸ“ Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð² Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚
- ðŸŒ Ð’ÐµÐ±-Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ Ð½Ð° Ð±Ð°Ð·Ðµ Gradio

## Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ

- **Python**: >= 3.11, < 3.13
- **ffmpeg**: Ð´Ð»Ñ ÐºÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð°Ñ†Ð¸Ð¸ Ð²Ð¸Ð´ÐµÐ¾ Ð² Ð°ÑƒÐ´Ð¸Ð¾
- **Hugging Face Ñ‚Ð¾ÐºÐµÐ½**: Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð´Ð¸Ð°Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸ (Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ñ ÑÐ¿Ð¸ÐºÐµÑ€Ð¾Ð²)

### Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° ffmpeg

**macOS:**
```bash
brew install ffmpeg
```

**Linux:**
```bash
sudo apt update
sudo apt install ffmpeg
```

**Windows:**
```bash
winget install ffmpeg
```

### ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Hugging Face Ñ‚Ð¾ÐºÐµÐ½Ð°

1. Ð—Ð°Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€ÑƒÐ¹Ñ‚ÐµÑÑŒ Ð½Ð° [huggingface.co](https://huggingface.co)
2. ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² [Settings â†’ Access Tokens](https://huggingface.co/settings/tokens)
3. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð½Ð¾Ð²Ñ‹Ð¹ Ñ‚Ð¾ÐºÐµÐ½ Ñ Ð¿Ñ€Ð°Ð²Ð°Ð¼Ð¸ Ð½Ð° Ñ‡Ñ‚ÐµÐ½Ð¸Ðµ
4. ÐŸÑ€Ð¸Ð¼Ð¸Ñ‚Ðµ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¼Ð¾Ð´ÐµÐ»ÐµÐ¹ Ð´Ð»Ñ Ð´Ð¸Ð°Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸:
   - [pyannote/speaker-diarization-3.1](https://huggingface.co/pyannote/speaker-diarization-3.1)
   - [pyannote/segmentation-3.0](https://huggingface.co/pyannote/segmentation-3.0)

## Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°

### 1. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹

Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Poetry (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ):

```bash
poetry install
poetry shell
```

Ð˜Ð»Ð¸ pip:

```bash
pip install whisperx av gradio
```

### 2. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ñ‚Ð¾ÐºÐµÐ½Ð°

Ð¢Ð¾ÐºÐµÐ½ Hugging Face Ð½Ð°ÑÑ‚Ñ€Ð°Ð¸Ð²Ð°ÐµÑ‚ÑÑ Ñ‡ÐµÑ€ÐµÐ· Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½ÑƒÑŽ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ `HF_TOKEN`. Ð•ÑÑ‚ÑŒ Ð´Ð²Ð° ÑÐ¿Ð¾ÑÐ¾Ð±Ð°:

**Ð¡Ð¿Ð¾ÑÐ¾Ð± 1: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ `.env` Ñ„Ð°Ð¹Ð»Ð° (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)**

Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ñ„Ð°Ð¹Ð» `.env` Ð² ÐºÐ¾Ñ€Ð½Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°:

```bash
HF_TOKEN=hf_Ð’ÐÐ¨_Ð¢ÐžÐšÐ•Ð_Ð—Ð”Ð•Ð¡Ð¬
```

Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ Ñ‚Ð¾ÐºÐµÐ½ Ð¸Ð· ÑÑ‚Ð¾Ð³Ð¾ Ñ„Ð°Ð¹Ð»Ð°.

**Ð¡Ð¿Ð¾ÑÐ¾Ð± 2: Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð¹ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ**

```bash
# macOS/Linux
export HF_TOKEN="hf_Ð’ÐÐ¨_Ð¢ÐžÐšÐ•Ð_Ð—Ð”Ð•Ð¡Ð¬"

# Windows (PowerShell)
$env:HF_TOKEN="hf_Ð’ÐÐ¨_Ð¢ÐžÐšÐ•Ð_Ð—Ð”Ð•Ð¡Ð¬"
```

âš ï¸ **Ð’Ð°Ð¶Ð½Ð¾:** Ð¤Ð°Ð¹Ð» `.env` ÑƒÐ¶Ðµ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ Ð² `.gitignore` Ð¸ Ð½Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ð¿Ð¾Ð¿Ð°Ð´Ð°Ñ‚ÑŒ Ð² git. ÐÐ¸ÐºÐ¾Ð³Ð´Ð° Ð½Ðµ ÐºÐ¾Ð¼Ð¼Ð¸Ñ‚ÑŒÑ‚Ðµ Ñ‚Ð¾ÐºÐµÐ½Ñ‹ Ð² Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹!

## Quick start (Windows)

ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ñ‰Ð¸Ðº Ð´Ð»Ñ Windows â€” Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð´Ð°Ð¶Ðµ Ð½Ð° "Ñ‡Ð¸ÑÑ‚Ð¾Ð¼" ÐŸÐš.

### Ð¨Ð°Ð³ 1: Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Python 3.12 (ÐµÑÐ»Ð¸ Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÐµÑ‚)

Ð•ÑÐ»Ð¸ Python 3.12 Ð½Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½:
- **Ð¡ winget:** `winget install Python.Python.3.12`
- **Ð‘ÐµÐ· winget:** ÑÐºÐ°Ñ‡Ð°Ð¹Ñ‚Ðµ Ñ [python.org](https://www.python.org/downloads/), Ð¿Ñ€Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐµ Ð¾Ñ‚Ð¼ÐµÑ‚ÑŒÑ‚Ðµ **"Add Python to PATH"**

### Ð¨Ð°Ð³ 2: Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° ffmpeg (Ð´Ð»Ñ mp4/mkv/webm)

```bash
# Ð¡ winget:
winget install ffmpeg

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°:
ffmpeg -version
```

Ð‘ÐµÐ· ffmpeg Ð¼Ð¾Ð¶Ð½Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ mp3/wav Ñ„Ð°Ð¹Ð»Ð°Ð¼Ð¸.

### Ð¨Ð°Ð³ 3: Ð—Ð°Ð¿ÑƒÑÐº ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ñ‰Ð¸ÐºÐ°

```
Ð”Ð²Ð°Ð¶Ð´Ñ‹ ÐºÐ»Ð¸ÐºÐ½Ð¸Ñ‚Ðµ setup_win.bat
```

Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ñ‰Ð¸Ðº:
- ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ Python, pip, venv, ffmpeg
- ÐŸÑ€ÐµÐ´Ð»Ð¾Ð¶Ð¸Ñ‚ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ñ€ÐµÐ¶Ð¸Ð¼: **CPU** Ð¸Ð»Ð¸ **GPU (NVIDIA)**
- Ð¡Ð¾Ð·Ð´Ð°ÑÑ‚ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ Ð²ÑÐµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
- ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ Ñ„Ð°Ð¹Ð» `.env`

### Ð¨Ð°Ð³ 4: Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ HF_TOKEN

Ð”Ð»Ñ Ð´Ð¸Ð°Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸ (Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ñ ÑÐ¿Ð¸ÐºÐµÑ€Ð¾Ð²) Ð½ÑƒÐ¶ÐµÐ½ Ñ‚Ð¾ÐºÐµÐ½ Hugging Face. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ñ„Ð°Ð¹Ð» `.env` Ð¸ Ð´Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ:
```
HF_TOKEN=hf_Ð’ÐÐ¨_Ð¢ÐžÐšÐ•Ð
```

ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ Ð¾ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ð¸ Ñ‚Ð¾ÐºÐµÐ½Ð° â€” Ð² Ñ€Ð°Ð·Ð´ÐµÐ»Ðµ "ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Hugging Face Ñ‚Ð¾ÐºÐµÐ½Ð°".

### Ð¨Ð°Ð³ 5: Ð—Ð°Ð¿ÑƒÑÐº

| Ð¤Ð°Ð¹Ð» | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ |
|------|----------|
| `run_ui.bat` | Ð—Ð°Ð¿ÑƒÑÐº Ð²ÐµÐ±-Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐ° Gradio |
| `run_cli.bat` | Ð—Ð°Ð¿ÑƒÑÐº ÐºÐ¾Ð¼Ð°Ð½Ð´Ð½Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸ |

```
Ð”Ð²Ð°Ð¶Ð´Ñ‹ ÐºÐ»Ð¸ÐºÐ½Ð¸Ñ‚Ðµ run_ui.bat â†’ Ð¾Ñ‚ÐºÑ€Ð¾ÐµÑ‚ÑÑ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€ Ñ UI
```

## Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ

### Ð’ÐµÐ±-Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)

Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Gradio UI:

```bash
python ui_gradio.py
```

ÐžÑ‚ÐºÑ€Ð¾ÐµÑ‚ÑÑ Ð²ÐµÐ±-Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ, Ð³Ð´Ðµ Ð²Ñ‹ ÑÐ¼Ð¾Ð¶ÐµÑ‚Ðµ:
- Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð²Ð¸Ð´ÐµÐ¾/Ð°ÑƒÐ´Ð¸Ð¾ Ñ„Ð°Ð¹Ð»
- Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ (Ð¼Ð¾Ð´ÐµÐ»ÑŒ, ÑÐ·Ñ‹Ðº, ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð¾)
- ÐžÑ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸
- Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ Ð³Ð¾Ñ‚Ð¾Ð²ÑƒÑŽ Ñ‚Ñ€Ð°Ð½ÑÐºÑ€Ð¸Ð¿Ñ†Ð¸ÑŽ

### ÐšÐ¾Ð¼Ð°Ð½Ð´Ð½Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ° (CLI)

```bash
# Ð‘Ð°Ð·Ð¾Ð²Ð¾Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ
python main.py videos/Ð²Ð°ÑˆÐµ-Ð²Ð¸Ð´ÐµÐ¾.mp4

# Ð¡ ÑƒÐºÐ°Ð·Ð°Ð½Ð¸ÐµÐ¼ ÑÐ·Ñ‹ÐºÐ°
python main.py videos/Ð²Ð°ÑˆÐµ-Ð²Ð¸Ð´ÐµÐ¾.mp4 --language ru

# Ð¡ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼Ð¸ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð°Ð¼Ð¸
python main.py videos/Ð²Ð°ÑˆÐµ-Ð²Ð¸Ð´ÐµÐ¾.mp4 -l en --model medium --device cuda --batch-size 8
```

#### ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ CLI

| ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ | ÐŸÐ¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ |
|----------|----------|--------------|
| `input_file` | ÐŸÑƒÑ‚ÑŒ Ðº Ð²Ð¸Ð´ÐµÐ¾/Ð°ÑƒÐ´Ð¸Ð¾ Ñ„Ð°Ð¹Ð»Ñƒ | `videos/alawar.mkv` |
| `-l, --language` | ÐšÐ¾Ð´ ÑÐ·Ñ‹ÐºÐ° (ru, en, etc.) | ÐÐ²Ñ‚Ð¾-Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ |
| `-m, --model` | Ð Ð°Ð·Ð¼ÐµÑ€ Ð¼Ð¾Ð´ÐµÐ»Ð¸ (large-v3, medium, small, base, tiny) | `large-v3` |
| `-d, --device` | Ð£ÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð¾ (cuda, cpu) | `cuda` |
| `--compute-type` | Ð¢Ð¸Ð¿ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ð¹ (float16, int8, float32) | `float16` |
| `-b, --batch-size` | Ð Ð°Ð·Ð¼ÐµÑ€ Ð±Ð°Ñ‚Ñ‡Ð° | `4` |
| `--no-diarize` | ÐžÑ‚ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ ÑÐ¿Ð¸ÐºÐµÑ€Ð¾Ð² | - |
| `--hf-token` | Ð¢Ð¾ÐºÐµÐ½ HuggingFace | Ð˜Ð· Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð¹ `HF_TOKEN` |
| `-o, --output-dir` | Ð”Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ Ð´Ð»Ñ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð² | `data` |

## Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ñ„Ð°Ð¹Ð»Ð¾Ð²

```
translate_whisper_x/
â”œâ”€â”€ videos/                    # Ð¡ÑŽÐ´Ð° ÐºÐ»Ð°Ð´Ð¸Ñ‚Ðµ Ð²Ð¸Ð´ÐµÐ¾/Ð°ÑƒÐ´Ð¸Ð¾
â”‚   â””â”€â”€ Ð²Ð°ÑˆÐµ-Ð²Ð¸Ð´ÐµÐ¾.mp4
â”œâ”€â”€ data/                      # Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸
â”‚   â””â”€â”€ Ð²Ð°ÑˆÐµ-Ð²Ð¸Ð´ÐµÐ¾/
â”‚       â”œâ”€â”€ audio.mp3          # Ð˜Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð½Ð¾Ðµ Ð°ÑƒÐ´Ð¸Ð¾
â”‚       â”œâ”€â”€ transcript.txt     # Ð“Ð¾Ñ‚Ð¾Ð²Ð°Ñ Ñ‚Ñ€Ð°Ð½ÑÐºÑ€Ð¸Ð¿Ñ†Ð¸Ñ
â”‚       â””â”€â”€ .cache/            # ÐŸÑ€Ð¾Ð¼ÐµÐ¶ÑƒÑ‚Ð¾Ñ‡Ð½Ñ‹Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹
â”‚           â”œâ”€â”€ transcribed.json   # ÐŸÐ¾ÑÐ»Ðµ Ñ‚Ñ€Ð°Ð½ÑÐºÑ€Ð¸Ð±Ð°Ñ†Ð¸Ð¸
â”‚           â”œâ”€â”€ aligned.json       # ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ñ€Ð°Ð²Ð½Ð¸Ð²Ð°Ð½Ð¸Ñ
â”‚           â””â”€â”€ diarized.json      # Ð¤Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚
â”œâ”€â”€ core/                      # ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ Ð»Ð¾Ð³Ð¸ÐºÐ°
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ options.py             # ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¿Ð°Ð¹Ð¿Ð»Ð°Ð¹Ð½Ð°
â”‚   â”œâ”€â”€ pipeline.py            # ÐŸÐ°Ð¹Ð¿Ð»Ð°Ð¹Ð½ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸
â”‚   â””â”€â”€ safe_globals.py        # Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ñ‚Ð¸Ð¿Ð¾Ð² Ð´Ð»Ñ torch
â”œâ”€â”€ main.py                    # CLI Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ
â”œâ”€â”€ ui_gradio.py               # Ð’ÐµÐ±-Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ Gradio
â”œâ”€â”€ run_ui.bat                 # Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÐº UI (Windows)
â”œâ”€â”€ run_cli.bat                # Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÐº CLI (Windows)
â””â”€â”€ run_ui_no_pause.bat        # Ð—Ð°Ð¿ÑƒÑÐº UI Ð±ÐµÐ· pause (Ð´Ð»Ñ ÑÑ€Ð»Ñ‹ÐºÐ°)
```

## Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚ Ð²Ñ‹Ð²Ð¾Ð´Ð°

Ð¢ÐµÐºÑÑ‚Ð¾Ð²Ñ‹Ð¹ Ñ„Ð°Ð¹Ð» ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ ÑÐµÐ³Ð¼ÐµÐ½Ñ‚Ñ‹ Ð²Ð¸Ð´Ð°:

```
[00:00:15 - 00:00:18] SPEAKER_00: Ð”Ð¾Ð±Ñ€Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ, ÐºÐ¾Ð»Ð»ÐµÐ³Ð¸!
[00:00:19 - 00:00:25] SPEAKER_01: Ð—Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐ¹Ñ‚Ðµ, Ð´Ð°Ð²Ð°Ð¹Ñ‚Ðµ Ð½Ð°Ñ‡Ð½ÐµÐ¼ Ð¾Ð±ÑÑƒÐ¶Ð´ÐµÐ½Ð¸Ðµ.
[00:00:26 - 00:00:32] SPEAKER_00: ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð¾, Ð¿ÐµÑ€Ð²Ñ‹Ð¹ Ð²Ð¾Ð¿Ñ€Ð¾Ñ Ð¿Ð¾ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ñƒ...
```

## ÐšÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ

Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ Ð¿Ñ€Ð¾Ð¼ÐµÐ¶ÑƒÑ‚Ð¾Ñ‡Ð½Ñ‹Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ Ð² `.cache/`:

- Ð•ÑÐ»Ð¸ Ñ‚Ñ€Ð°Ð½ÑÐºÑ€Ð¸Ð±Ð°Ñ†Ð¸Ñ ÑƒÐ¶Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð° â€” Ð¿Ñ€Ð¾Ð¿ÑƒÑÐºÐ°ÐµÑ‚ ÐµÑ‘
- Ð•ÑÐ»Ð¸ Ð²Ñ‹Ñ€Ð°Ð²Ð½Ð¸Ð²Ð°Ð½Ð¸Ðµ ÑƒÐ¶Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¾ â€” Ð¿Ñ€Ð¾Ð¿ÑƒÑÐºÐ°ÐµÑ‚ ÐµÐ³Ð¾
- Ð•ÑÐ»Ð¸ Ð´Ð¸Ð°Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ñ ÑƒÐ¶Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð° â€” Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹Ð¹ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚

Ð­Ñ‚Ð¾ **ÑÐºÐ¾Ð½Ð¾Ð¼Ð¸Ñ‚ Ð²Ñ€ÐµÐ¼Ñ** Ð¿Ñ€Ð¸ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ñ‹Ñ… Ð·Ð°Ð¿ÑƒÑÐºÐ°Ñ….

Ð§Ñ‚Ð¾Ð±Ñ‹ **Ð¿ÐµÑ€ÐµÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ** Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ñ Ð½ÑƒÐ»Ñ, ÑƒÐ´Ð°Ð»Ð¸Ñ‚Ðµ Ð¿Ð°Ð¿ÐºÑƒ `.cache/`:

```bash
rm -rf data/Ð²Ð°ÑˆÐµ-Ð²Ð¸Ð´ÐµÐ¾/.cache/
```

Ð˜Ð»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÐºÐ½Ð¾Ð¿ÐºÑƒ "Clear Cache" Ð² Ð²ÐµÐ±-Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐµ.

## Ð ÐµÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼

### ÐžÑˆÐ¸Ð±ÐºÐ°: `ffmpeg Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½`

Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ ffmpeg (ÑÐ¼. Ñ€Ð°Ð·Ð´ÐµÐ» Â«Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸ÑÂ»).

### ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð´Ð¸Ð°Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸

Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾:
1. Ð¢Ð¾ÐºÐµÐ½ Hugging Face Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½ Ñ‡ÐµÑ€ÐµÐ· Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½ÑƒÑŽ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ `HF_TOKEN` (Ð² `.env` Ñ„Ð°Ð¹Ð»Ðµ Ð¸Ð»Ð¸ ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½)
2. Ð¢Ð¾ÐºÐµÐ½ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð¸ Ð¸Ð¼ÐµÐµÑ‚ Ð¿Ñ€Ð°Ð²Ð° Ð½Ð° Ñ‡Ñ‚ÐµÐ½Ð¸Ðµ
3. Ð’Ñ‹ Ð¿Ñ€Ð¸Ð½ÑÐ»Ð¸ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¼Ð¾Ð´ÐµÐ»ÐµÐ¹ pyannote (ÑÐ¼. Ñ€Ð°Ð·Ð´ÐµÐ» Â«ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Hugging Face Ñ‚Ð¾ÐºÐµÐ½Ð°Â»)

### ÐœÐµÐ´Ð»ÐµÐ½Ð½Ð°Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°

- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ GPU, ÐµÑÐ»Ð¸ Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½: `--device cuda`
- Ð£Ð¼ÐµÐ½ÑŒÑˆÐ¸Ñ‚Ðµ Ñ€Ð°Ð·Ð¼ÐµÑ€ Ð¼Ð¾Ð´ÐµÐ»Ð¸: `--model medium`
- Ð£Ð²ÐµÐ»Ð¸Ñ‡ÑŒÑ‚Ðµ batch_size: `--batch-size 8` (ÐµÑÐ»Ð¸ Ñ…Ð²Ð°Ñ‚Ð°ÐµÑ‚ Ð¿Ð°Ð¼ÑÑ‚Ð¸)

## Ð›Ð¸Ñ†ÐµÐ½Ð·Ð¸Ñ

ÐŸÑ€Ð¾ÐµÐºÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÑƒ [WhisperX](https://github.com/m-bain/whisperX).
